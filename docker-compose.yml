version: "3.9"

services:
  spotify-yt-dlp-downloader:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: spotify-yt-dlp-downloader

    # This is an interactive CLI app (questionary menus), so keep STDIN + TTY attached.
    stdin_open: true
    tty: true

    # Spotify OAuth (PKCE) loopback callback:
    # - Your Spotify app Redirect URI must match your config.json `spotify_redirect_uri` exactly.
    # - If `spotify_redirect_uri` uses port 8888 (default: http://127.0.0.1:8888/callback), publish 8888.
    # - If you change the port in `spotify_redirect_uri`, update the mapping below to match.
    ports:
      - "8888:8888"

    volumes:
      - ./data:/app/data
      - ./music:/app/music
      - ./export:/app/export
      - ./config.json:/app/config.json
